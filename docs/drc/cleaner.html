
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>kppc.drc.slcleaner module &#8212; KLayout Photonic PCells 0.1.2 documentation</title>
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="../index.html">KLayout Photonic PCells 0.1.2 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="kppc-drc-slcleaner-module">
<span id="slcleaner"></span><h1>kppc.drc.slcleaner module<a class="headerlink" href="#kppc-drc-slcleaner-module" title="Permalink to this headline">¶</a></h1>
<p>An interface to the DrcSl.cpp Class.</p>
<dl class="class">
<dt id="kppc.drc.slcleaner.PyDrcSl">
<em class="property">class </em><code class="sig-prename descclassname">kppc.drc.slcleaner.</code><code class="sig-name descname">PyDrcSl</code><a class="headerlink" href="#kppc.drc.slcleaner.PyDrcSl" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt>
<code class="sig-name descname">def add_data(x1, x2, y1, y2)</code></dt>
<dd><p>Insert data into the scanline cleaner. The data is an edge that will be manhattanized and cleaned.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Edges should be added in such a way that the
outwards face is left in the direction of p1 to p2.
Klayout already does this nicely.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x1</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – x position of p1 of the edge</p></li>
<li><p><strong>x2</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – y position of p1 of the edge</p></li>
<li><p><strong>y1</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – x position of p2 of the edge</p></li>
<li><p><strong>y2</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – y position of p2 of the edge</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kppc.drc.slcleaner.PyDrcSl.clean">
<code class="sig-name descname">clean</code><span class="sig-paren">(</span><em class="sig-param">x = 10</em><span class="sig-paren">)</span><a class="headerlink" href="#kppc.drc.slcleaner.PyDrcSl.clean" title="Permalink to this definition">¶</a></dt>
<dd><p>Clean data in the vector for space and width violations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>x</strong> – number of max tries</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kppc.drc.slcleaner.PyDrcSl.clean_space">
<code class="sig-name descname">clean_space</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kppc.drc.slcleaner.PyDrcSl.clean_space" title="Permalink to this definition">¶</a></dt>
<dd><p>Clean the current data for space violations.</p>
</dd></dl>

<dl class="method">
<dt id="kppc.drc.slcleaner.PyDrcSl.clean_width">
<code class="sig-name descname">clean_width</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kppc.drc.slcleaner.PyDrcSl.clean_width" title="Permalink to this definition">¶</a></dt>
<dd><p>Clean the current data for width violations.</p>
</dd></dl>

<dl class="method">
<dt id="kppc.drc.slcleaner.PyDrcSl.init_list">
<code class="sig-name descname">init_list</code><span class="sig-paren">(</span><em class="sig-param">x1: int</em>, <em class="sig-param">x2: int</em>, <em class="sig-param">y1: int</em>, <em class="sig-param">y2: int</em>, <em class="sig-param">viospace: int</em>, <em class="sig-param">viowidth: int</em><span class="sig-paren">)</span><a class="headerlink" href="#kppc.drc.slcleaner.PyDrcSl.init_list" title="Permalink to this definition">¶</a></dt>
<dd><p>(Re-)Initialize the Cleaner. x1,2 and y1,2 define the bounding box of the cleaner.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If a corner or a complete edge is outside the bounding box and is added through the add_data function, a Segmentation Fault will most likely occur and the module (including Klayout) crashes. Alternatively, it will just be confined to the bounding box and the rest will be cut off.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x1</strong> – left bound of box</p></li>
<li><p><strong>x2</strong> – right bound of box</p></li>
<li><p><strong>y1</strong> – bottom bound of box</p></li>
<li><p><strong>y2</strong> (<em>:integers</em>) – top bound of box</p></li>
<li><p><strong>viospace</strong> (<em>minimum space violation in database units</em>) – minimum space violation in database units</p></li>
<li><p><strong>viowidth</strong> (<em>minimum width violation in database units</em>) – minimum width violation in database units</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kppc.drc.slcleaner.PyDrcSl.get_row">
<code class="sig-name descname">get_row</code><span class="sig-paren">(</span><em class="sig-param">ind: int</em><span class="sig-paren">)</span><a class="headerlink" href="#kppc.drc.slcleaner.PyDrcSl.get_row" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the edge data back to python from the C++ object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ind</strong> – index of the row to retrieve data from</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>numpy array of the edges</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kppc.drc.slcleaner.PyDrcSl.get_row_types">
<code class="sig-name descname">get_row_types</code><span class="sig-paren">(</span><em class="sig-param">ind: int</em><span class="sig-paren">)</span><a class="headerlink" href="#kppc.drc.slcleaner.PyDrcSl.get_row_types" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the type of edges in that row.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ind</strong> – index of the row</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>numpy array of types of edges (0 for upwards facing edge, 1 for downwards)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kppc.drc.slcleaner.PyDrcSl.polygons">
<code class="sig-name descname">polygons</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kppc.drc.slcleaner.PyDrcSl.polygons" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns list of crude polygons. The format is list of polygons, where a polygon is a list of tuples of (x,y)</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>polygons in the form [[(x1,y1),(x2,y2),…],…]</p>
</dd>
<dt class="field-even">Return_type</dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kppc.drc.slcleaner.PyDrcSl.printvector">
<code class="sig-name descname">printvector</code><span class="sig-paren">(</span><em class="sig-param">beg = -1</em>, <em class="sig-param">end = -1</em><span class="sig-paren">)</span><a class="headerlink" href="#kppc.drc.slcleaner.PyDrcSl.printvector" title="Permalink to this definition">¶</a></dt>
<dd><p>Print the data of rows/columns depending on current orientation</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>beg</strong> – beginning of the rows/columns that should be printed</p></li>
<li><p><strong>end</strong> – ending of the rows/columns that should be printed</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kppc.drc.slcleaner.PyDrcSl.s">
<code class="sig-name descname">s</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kppc.drc.slcleaner.PyDrcSl.s" title="Permalink to this definition">¶</a></dt>
<dd><p>This property can be used to get the array size of the cleaner.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Size of the array of vectors.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="kppc.drc.slcleaner.PyDrcSl.sort">
<code class="sig-name descname">sort</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kppc.drc.slcleaner.PyDrcSl.sort" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort the data in ascending order. This will also delete invalid edges, i.e. touching / overlapping polygons will be merged.</p>
</dd></dl>

<dl class="method">
<dt id="kppc.drc.slcleaner.PyDrcSl.switch_dimensions">
<code class="sig-name descname">switch_dimensions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#kppc.drc.slcleaner.PyDrcSl.switch_dimensions" title="Permalink to this definition">¶</a></dt>
<dd><p>Switch the orientation of the data. From row oriented to column oriented and vice-versa.</p>
</dd></dl>

</dd></dl>

<p>This wrapper is used to expose the design rule cleaner class to the python PCells of KLayout.
The algorithm is pasted below. The algorithm uses a <a class="reference external" href="https://en.wikipedia.org/wiki/Scanline_rendering">Scanline Rendering Algorithm</a>
to first convert the polygons from KLayout to manhattanized edges and then add them into an array representation
of the polygon edges.</p>
<p>Source Code: <a class="reference internal" href="../source_code/drcsl_source.html#drcslsource"><span class="std std-ref">DrcSl Source</span></a></p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/drc/cleaner.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="../index.html">KLayout Photonic PCells 0.1.2 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, Sebastian Goeldi.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.1.2.
    </div>
  </body>
</html>